// Backup module - testsuite
//
// GetBaseName tests
//
// $Id$
//

{
include "testsuite.ycp";

map readmap = $[ "target" : $["string" : "", "size" : -1, "tmpdir" : "/tmp" ],
    "proc" : $["cpuinfo" : $[ "value" : $["0" : $[ "flags" : ""]]]],
    "probe" : $["has_smp" : false, "is_uml" : false, "cdrom" : $["manual" : []]],
    ];

map execmap = $[ "target" : $["bash_output" : $["exit":0, "stderr":"", "stdout":"charmap=\"ISO-8859-1\"\n"]]];

TESTSUITE_INIT([ readmap, $[], execmap ], nil);

include "backup/functions.ycp";

TEST( ``(GetBaseName(nil) ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("file") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("file.ext") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/file") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/file.ext") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/dir/") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/dir/dir2/file.ext") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/dir.1/dir.2/file") ), [ $[], $[], $[] ], nil );
TEST( ``(GetBaseName("/dir.1/dir.2/file.ext") ), [ $[], $[], $[] ], nil );

}

