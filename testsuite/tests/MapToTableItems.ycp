// Backup module - testsuite
//
// MapToTableItems function tests
//
// $Id$
//

{

include "backup/functions.ycp";
include "testsuite.ycp";

// proc.cpuinfo.value.0.flags, target.string - used in Kernel::
// probe.has_smp - Arch::
// probe.cdrom.manual - StorageDevices::
// target.size - AutoInstall::

TESTSUITE_INIT([ $[ "target" : $["string" : "", "size" : -1 ],
    "proc" : $["cpuinfo" : $[ "value" : $["0" : $[ "flags" : ""]]]],
    "probe" : $["has_smp" : false, "cdrom" : $["manual" : []]]  ], [], [] ] ,nil);
import "Pkg";	// override packamanager
import "Backup";

// used global variables
string nocheckmark = "[ ]";
string checkmark = "[x]";

Backup::backup_files = nil;
Backup::selected_files = $["aaa_base-2001.5.22-0" : $["changed_files" : ["/etc/modules.conf"]]];

DUMP( MapToTableItems(nil) );

Backup::backup_files = $[];
DUMP( MapToTableItems(true) );

Backup::backup_files = $[
  "pkg1": $["changed_files" : []],
  "pkg2" : $["changed_files" : nil],
  "aaa_base-2001.5.22-0" : $["changed_files" : ["/etc/inittab", "/etc/modules.conf"]],
  "" : $["changed_files" : ["/etc/fstab", "/etc/passwd"]],
  "pkg3" : nil
];
DUMP( MapToTableItems(false) );

DUMP( MapToTableItems(nil) );

DUMP( MapToTableItems(true) );

}

