// Backup module - testsuite
//
// GetCapacity function tests
//
// $Id$
//

{

include "backup/functions.ycp";
include "testsuite.ycp";

// proc.cpuinfo.value.0.flags, target.string - used in Kernel::
// probe.has_smp - Arch::
// probe.cdrom.manual - StorageDevices::
// target.size - AutoInstall::

TESTSUITE_INIT([ $[ "target" : $["string" : "", "size" : -1, "tmpdir" : "/tmp" ],
    "proc" : $["cpuinfo" : $[ "value" : $["0" : $[ "flags" : ""]]]],
    "probe" : $["has_smp" : false, "cdrom" : $["manual" : []]]  ], [], [] ] ,nil);

import "Pkg";	// override packamanager
import "Backup";

DUMP( Backup::GetCapacity(nil, nil) );
DUMP( Backup::GetCapacity([ ], `s) );
DUMP( Backup::GetCapacity(["no map"], nil) );
DUMP( Backup::GetCapacity([
    $[
	"capacity" : 1440000
    ]
], `s) );

DUMP( Backup::GetCapacity([
    $[
	"label" : _("Floppy 1.44 MB"),
	"symbol" : `fd144,
	"capacity" : 1440000
    ],
    $[
	"label" : _("Floppy 1.2 MB"),
	"symbol" : `fd12,
	"capacity" : 1200000
    ]
], `fd12) );

}

